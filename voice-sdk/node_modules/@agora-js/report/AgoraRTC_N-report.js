/**
 * AgoraWebSDK_N-v4.19.0-0-gd4901fde-dirty Copyright AgoraInc.
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@agora-js/shared"),require("axios")):"function"==typeof define&&define.amd?define(["exports","@agora-js/shared","axios"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).AgoraRTCReport={},t.shared$8,t.Axios)}(this,(function(t,e,r){"use strict";var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function o(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var i={exports:{}},a=function(t){return t&&t.Math==Math&&t},s=a("object"==typeof globalThis&&globalThis)||a("object"==typeof window&&window)||a("object"==typeof self&&self)||a("object"==typeof n&&n)||function(){return this}()||n||Function("return this")(),c=function(t){try{return!!t()}catch(t){return!0}},u=!c((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),p=u,l=Function.prototype,f=l.apply,d=l.call,h="object"==typeof Reflect&&Reflect.apply||(p?d.bind(f):function(){return d.apply(f,arguments)}),E=u,g=Function.prototype,v=g.call,T=E&&g.bind.bind(v,v),y=E?T:function(t){return function(){return v.apply(t,arguments)}},m=y,S=m({}.toString),_=m("".slice),R=function(t){return _(S(t),8,-1)},O=R,A=y,I=function(t){if("Function"===O(t))return A(t)},b="object"==typeof document&&document.all,P={all:b,IS_HTMLDDA:void 0===b&&void 0!==b},w=P.all,N=P.IS_HTMLDDA?function(t){return"function"==typeof t||t===w}:function(t){return"function"==typeof t},C={},D=!c((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),L=u,U=Function.prototype.call,M=L?U.bind(U):function(){return U.apply(U,arguments)},j={},x={}.propertyIsEnumerable,W=Object.getOwnPropertyDescriptor,k=W&&!x.call({1:2},1);j.f=k?function(t){var e=W(this,t);return!!e&&e.enumerable}:x;var V,G,F=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},B=c,J=R,Y=Object,K=y("".split),H=B((function(){return!Y("z").propertyIsEnumerable(0)}))?function(t){return"String"==J(t)?K(t,""):Y(t)}:Y,Q=function(t){return null==t},q=Q,X=TypeError,z=function(t){if(q(t))throw X("Can't call method on "+t);return t},$=H,Z=z,tt=function(t){return $(Z(t))},et=N,rt=P.all,nt=P.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:et(t)||t===rt}:function(t){return"object"==typeof t?null!==t:et(t)},ot={},it=ot,at=s,st=N,ct=function(t){return st(t)?t:void 0},ut=function(t,e){return arguments.length<2?ct(it[t])||ct(at[t]):it[t]&&it[t][e]||at[t]&&at[t][e]},pt=y({}.isPrototypeOf),lt="undefined"!=typeof navigator&&String(navigator.userAgent)||"",ft=s,dt=lt,ht=ft.process,Et=ft.Deno,gt=ht&&ht.versions||Et&&Et.version,vt=gt&&gt.v8;vt&&(G=(V=vt.split("."))[0]>0&&V[0]<4?1:+(V[0]+V[1])),!G&&dt&&(!(V=dt.match(/Edge\/(\d+)/))||V[1]>=74)&&(V=dt.match(/Chrome\/(\d+)/))&&(G=+V[1]);var Tt=G,yt=Tt,mt=c,St=s.String,_t=!!Object.getOwnPropertySymbols&&!mt((function(){var t=Symbol();return!St(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&yt&&yt<41})),Rt=_t&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ot=ut,At=N,It=pt,bt=Object,Pt=Rt?function(t){return"symbol"==typeof t}:function(t){var e=Ot("Symbol");return At(e)&&It(e.prototype,bt(t))},wt=String,Nt=function(t){try{return wt(t)}catch(t){return"Object"}},Ct=N,Dt=Nt,Lt=TypeError,Ut=function(t){if(Ct(t))return t;throw Lt(Dt(t)+" is not a function")},Mt=Ut,jt=Q,xt=function(t,e){var r=t[e];return jt(r)?void 0:Mt(r)},Wt=M,kt=N,Vt=nt,Gt=TypeError,Ft={exports:{}},Bt=s,Jt=Object.defineProperty,Yt=function(t,e){try{Jt(Bt,t,{value:e,configurable:!0,writable:!0})}catch(r){Bt[t]=e}return e},Kt="__core-js_shared__",Ht=s[Kt]||Yt(Kt,{}),Qt=Ht;(Ft.exports=function(t,e){return Qt[t]||(Qt[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.31.1",mode:"pure",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.31.1/LICENSE",source:"https://github.com/zloirock/core-js"});var qt=Ft.exports,Xt=z,zt=Object,$t=function(t){return zt(Xt(t))},Zt=$t,te=y({}.hasOwnProperty),ee=Object.hasOwn||function(t,e){return te(Zt(t),e)},re=y,ne=0,oe=Math.random(),ie=re(1..toString),ae=function(t){return"Symbol("+(void 0===t?"":t)+")_"+ie(++ne+oe,36)},se=qt,ce=ee,ue=ae,pe=_t,le=Rt,fe=s.Symbol,de=se("wks"),he=le?fe.for||fe:fe&&fe.withoutSetter||ue,Ee=function(t){return ce(de,t)||(de[t]=pe&&ce(fe,t)?fe[t]:he("Symbol."+t)),de[t]},ge=M,ve=nt,Te=Pt,ye=xt,me=function(t,e){var r,n;if("string"===e&&kt(r=t.toString)&&!Vt(n=Wt(r,t)))return n;if(kt(r=t.valueOf)&&!Vt(n=Wt(r,t)))return n;if("string"!==e&&kt(r=t.toString)&&!Vt(n=Wt(r,t)))return n;throw Gt("Can't convert object to primitive value")},Se=TypeError,_e=Ee("toPrimitive"),Re=function(t,e){if(!ve(t)||Te(t))return t;var r,n=ye(t,_e);if(n){if(void 0===e&&(e="default"),r=ge(n,t,e),!ve(r)||Te(r))return r;throw Se("Can't convert object to primitive value")}return void 0===e&&(e="number"),me(t,e)},Oe=Pt,Ae=function(t){var e=Re(t,"string");return Oe(e)?e:e+""},Ie=nt,be=s.document,Pe=Ie(be)&&Ie(be.createElement),we=function(t){return Pe?be.createElement(t):{}},Ne=we,Ce=!D&&!c((function(){return 7!=Object.defineProperty(Ne("div"),"a",{get:function(){return 7}}).a})),De=D,Le=M,Ue=j,Me=F,je=tt,xe=Ae,We=ee,ke=Ce,Ve=Object.getOwnPropertyDescriptor;C.f=De?Ve:function(t,e){if(t=je(t),e=xe(e),ke)try{return Ve(t,e)}catch(t){}if(We(t,e))return Me(!Le(Ue.f,t,e),t[e])};var Ge=c,Fe=N,Be=/#|\.prototype\./,Je=function(t,e){var r=Ke[Ye(t)];return r==Qe||r!=He&&(Fe(e)?Ge(e):!!e)},Ye=Je.normalize=function(t){return String(t).replace(Be,".").toLowerCase()},Ke=Je.data={},He=Je.NATIVE="N",Qe=Je.POLYFILL="P",qe=Je,Xe=Ut,ze=u,$e=I(I.bind),Ze=function(t,e){return Xe(t),void 0===e?t:ze?$e(t,e):function(){return t.apply(e,arguments)}},tr={},er=D&&c((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),rr=nt,nr=String,or=TypeError,ir=function(t){if(rr(t))return t;throw or(nr(t)+" is not an object")},ar=D,sr=Ce,cr=er,ur=ir,pr=Ae,lr=TypeError,fr=Object.defineProperty,dr=Object.getOwnPropertyDescriptor,hr="enumerable",Er="configurable",gr="writable";tr.f=ar?cr?function(t,e,r){if(ur(t),e=pr(e),ur(r),"function"==typeof t&&"prototype"===e&&"value"in r&&gr in r&&!r[gr]){var n=dr(t,e);n&&n[gr]&&(t[e]=r.value,r={configurable:Er in r?r[Er]:n[Er],enumerable:hr in r?r[hr]:n[hr],writable:!1})}return fr(t,e,r)}:fr:function(t,e,r){if(ur(t),e=pr(e),ur(r),sr)try{return fr(t,e,r)}catch(t){}if("get"in r||"set"in r)throw lr("Accessors not supported");return"value"in r&&(t[e]=r.value),t};var vr=tr,Tr=F,yr=D?function(t,e,r){return vr.f(t,e,Tr(1,r))}:function(t,e,r){return t[e]=r,t},mr=s,Sr=h,_r=I,Rr=N,Or=C.f,Ar=qe,Ir=ot,br=Ze,Pr=yr,wr=ee,Nr=function(t){var e=function(r,n,o){if(this instanceof e){switch(arguments.length){case 0:return new t;case 1:return new t(r);case 2:return new t(r,n)}return new t(r,n,o)}return Sr(t,this,arguments)};return e.prototype=t.prototype,e},Cr=function(t,e){var r,n,o,i,a,s,c,u,p,l=t.target,f=t.global,d=t.stat,h=t.proto,E=f?mr:d?mr[l]:(mr[l]||{}).prototype,g=f?Ir:Ir[l]||Pr(Ir,l,{})[l],v=g.prototype;for(i in e)n=!(r=Ar(f?i:l+(d?".":"#")+i,t.forced))&&E&&wr(E,i),s=g[i],n&&(c=t.dontCallGetSet?(p=Or(E,i))&&p.value:E[i]),a=n&&c?c:e[i],n&&typeof s==typeof a||(u=t.bind&&n?br(a,mr):t.wrap&&n?Nr(a):h&&Rr(a)?_r(a):a,(t.sham||a&&a.sham||s&&s.sham)&&Pr(u,"sham",!0),Pr(g,i,u),h&&(wr(Ir,o=l+"Prototype")||Pr(Ir,o,{}),Pr(Ir[o],i,a),t.real&&v&&(r||!v[i])&&Pr(v,i,a)))},Dr=Cr,Lr=D,Ur=tr.f;Dr({target:"Object",stat:!0,forced:Object.defineProperty!==Ur,sham:!Lr},{defineProperty:Ur});var Mr=ot.Object,jr=i.exports=function(t,e,r){return Mr.defineProperty(t,e,r)};Mr.defineProperty.sham&&(jr.sham=!0);var xr=o(i.exports),Wr=R,kr=Array.isArray||function(t){return"Array"==Wr(t)},Vr=Math.ceil,Gr=Math.floor,Fr=Math.trunc||function(t){var e=+t;return(e>0?Gr:Vr)(e)},Br=function(t){var e=+t;return e!=e||0===e?0:Fr(e)},Jr=Br,Yr=Math.min,Kr=function(t){return t>0?Yr(Jr(t),9007199254740991):0},Hr=function(t){return Kr(t.length)},Qr=TypeError,qr=Ae,Xr=tr,zr=F,$r=function(t,e,r){var n=qr(e);n in t?Xr.f(t,n,zr(0,r)):t[n]=r},Zr={};Zr[Ee("toStringTag")]="z";var tn="[object z]"===String(Zr),en=tn,rn=N,nn=R,on=Ee("toStringTag"),an=Object,sn="Arguments"==nn(function(){return arguments}()),cn=en?nn:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=an(t),on))?r:sn?nn(e):"Object"==(n=nn(e))&&rn(e.callee)?"Arguments":n},un=N,pn=Ht,ln=y(Function.toString);un(pn.inspectSource)||(pn.inspectSource=function(t){return ln(t)});var fn=pn.inspectSource,dn=y,hn=c,En=N,gn=cn,vn=fn,Tn=function(){},yn=[],mn=ut("Reflect","construct"),Sn=/^\s*(?:class|function)\b/,_n=dn(Sn.exec),Rn=!Sn.exec(Tn),On=function(t){if(!En(t))return!1;try{return mn(Tn,yn,t),!0}catch(t){return!1}},An=function(t){if(!En(t))return!1;switch(gn(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Rn||!!_n(Sn,vn(t))}catch(t){return!0}};An.sham=!0;var In=!mn||hn((function(){var t;return On(On.call)||!On(Object)||!On((function(){t=!0}))||t}))?An:On,bn=kr,Pn=In,wn=nt,Nn=Ee("species"),Cn=Array,Dn=function(t){var e;return bn(t)&&(e=t.constructor,(Pn(e)&&(e===Cn||bn(e.prototype))||wn(e)&&null===(e=e[Nn]))&&(e=void 0)),void 0===e?Cn:e},Ln=function(t,e){return new(Dn(t))(0===e?0:e)},Un=c,Mn=Tt,jn=Ee("species"),xn=Cr,Wn=c,kn=kr,Vn=nt,Gn=$t,Fn=Hr,Bn=function(t){if(t>9007199254740991)throw Qr("Maximum allowed index exceeded");return t},Jn=$r,Yn=Ln,Kn=function(t){return Mn>=51||!Un((function(){var e=[];return(e.constructor={})[jn]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},Hn=Tt,Qn=Ee("isConcatSpreadable"),qn=Hn>=51||!Wn((function(){var t=[];return t[Qn]=!1,t.concat()[0]!==t})),Xn=function(t){if(!Vn(t))return!1;var e=t[Qn];return void 0!==e?!!e:kn(t)};xn({target:"Array",proto:!0,arity:1,forced:!qn||!Kn("concat")},{concat:function(t){var e,r,n,o,i,a=Gn(this),s=Yn(a,0),c=0;for(e=-1,n=arguments.length;e<n;e++)if(Xn(i=-1===e?a:arguments[e]))for(o=Fn(i),Bn(c+o),r=0;r<o;r++,c++)r in i&&Jn(s,c,i[r]);else Bn(c+1),Jn(s,c++,i);return s.length=c,s}});var zn=cn,$n=String,Zn=function(t){if("Symbol"===zn(t))throw TypeError("Cannot convert a Symbol value to a string");return $n(t)},to={},eo=Br,ro=Math.max,no=Math.min,oo=function(t,e){var r=eo(t);return r<0?ro(r+e,0):no(r,e)},io=tt,ao=oo,so=Hr,co=function(t){return function(e,r,n){var o,i=io(e),a=so(i),s=ao(n,a);if(t&&r!=r){for(;a>s;)if((o=i[s++])!=o)return!0}else for(;a>s;s++)if((t||s in i)&&i[s]===r)return t||s||0;return!t&&-1}},uo={includes:co(!0),indexOf:co(!1)},po={},lo=ee,fo=tt,ho=uo.indexOf,Eo=po,go=y([].push),vo=function(t,e){var r,n=fo(t),o=0,i=[];for(r in n)!lo(Eo,r)&&lo(n,r)&&go(i,r);for(;e.length>o;)lo(n,r=e[o++])&&(~ho(i,r)||go(i,r));return i},To=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],yo=vo,mo=To,So=Object.keys||function(t){return yo(t,mo)},_o=D,Ro=er,Oo=tr,Ao=ir,Io=tt,bo=So;to.f=_o&&!Ro?Object.defineProperties:function(t,e){Ao(t);for(var r,n=Io(e),o=bo(e),i=o.length,a=0;i>a;)Oo.f(t,r=o[a++],n[r]);return t};var Po,wo=ut("document","documentElement"),No=ae,Co=qt("keys"),Do=function(t){return Co[t]||(Co[t]=No(t))},Lo=ir,Uo=to,Mo=To,jo=po,xo=wo,Wo=we,ko="prototype",Vo="script",Go=Do("IE_PROTO"),Fo=function(){},Bo=function(t){return"<"+Vo+">"+t+"</"+Vo+">"},Jo=function(t){t.write(Bo("")),t.close();var e=t.parentWindow.Object;return t=null,e},Yo=function(){try{Po=new ActiveXObject("htmlfile")}catch(t){}var t,e,r;Yo="undefined"!=typeof document?document.domain&&Po?Jo(Po):(e=Wo("iframe"),r="java"+Vo+":",e.style.display="none",xo.appendChild(e),e.src=String(r),(t=e.contentWindow.document).open(),t.write(Bo("document.F=Object")),t.close(),t.F):Jo(Po);for(var n=Mo.length;n--;)delete Yo[ko][Mo[n]];return Yo()};jo[Go]=!0;var Ko=Object.create||function(t,e){var r;return null!==t?(Fo[ko]=Lo(t),r=new Fo,Fo[ko]=null,r[Go]=t):r=Yo(),void 0===e?r:Uo.f(r,e)},Ho={},Qo=vo,qo=To.concat("length","prototype");Ho.f=Object.getOwnPropertyNames||function(t){return Qo(t,qo)};var Xo={},zo=oo,$o=Hr,Zo=$r,ti=Array,ei=Math.max,ri=function(t,e,r){for(var n=$o(t),o=zo(e,n),i=zo(void 0===r?n:r,n),a=ti(ei(i-o,0)),s=0;o<i;o++,s++)Zo(a,s,t[o]);return a.length=s,a},ni=R,oi=tt,ii=Ho.f,ai=ri,si="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];Xo.f=function(t){return si&&"Window"==ni(t)?function(t){try{return ii(t)}catch(t){return ai(si)}}(t):ii(oi(t))};var ci={};ci.f=Object.getOwnPropertySymbols;var ui=yr,pi=function(t,e,r,n){return n&&n.enumerable?t[e]=r:ui(t,e,r),t},li=tr,fi=function(t,e,r){return li.f(t,e,r)},di={},hi=Ee;di.f=hi;var Ei,gi,vi,Ti=ot,yi=ee,mi=di,Si=tr.f,_i=function(t){var e=Ti.Symbol||(Ti.Symbol={});yi(e,t)||Si(e,t,{value:mi.f(t)})},Ri=M,Oi=ut,Ai=Ee,Ii=pi,bi=function(){var t=Oi("Symbol"),e=t&&t.prototype,r=e&&e.valueOf,n=Ai("toPrimitive");e&&!e[n]&&Ii(e,n,(function(t){return Ri(r,this)}),{arity:1})},Pi=cn,wi=tn?{}.toString:function(){return"[object "+Pi(this)+"]"},Ni=tn,Ci=tr.f,Di=yr,Li=ee,Ui=wi,Mi=Ee("toStringTag"),ji=function(t,e,r,n){if(t){var o=r?t:t.prototype;Li(o,Mi)||Ci(o,Mi,{configurable:!0,value:e}),n&&!Ni&&Di(o,"toString",Ui)}},xi=N,Wi=s.WeakMap,ki=xi(Wi)&&/native code/.test(String(Wi)),Vi=s,Gi=nt,Fi=yr,Bi=ee,Ji=Ht,Yi=Do,Ki=po,Hi="Object already initialized",Qi=Vi.TypeError,qi=Vi.WeakMap;if(ki||Ji.state){var Xi=Ji.state||(Ji.state=new qi);Xi.get=Xi.get,Xi.has=Xi.has,Xi.set=Xi.set,Ei=function(t,e){if(Xi.has(t))throw Qi(Hi);return e.facade=t,Xi.set(t,e),e},gi=function(t){return Xi.get(t)||{}},vi=function(t){return Xi.has(t)}}else{var zi=Yi("state");Ki[zi]=!0,Ei=function(t,e){if(Bi(t,zi))throw Qi(Hi);return e.facade=t,Fi(t,zi,e),e},gi=function(t){return Bi(t,zi)?t[zi]:{}},vi=function(t){return Bi(t,zi)}}var $i={set:Ei,get:gi,has:vi,enforce:function(t){return vi(t)?gi(t):Ei(t,{})},getterFor:function(t){return function(e){var r;if(!Gi(e)||(r=gi(e)).type!==t)throw Qi("Incompatible receiver, "+t+" required");return r}}},Zi=Ze,ta=H,ea=$t,ra=Hr,na=Ln,oa=y([].push),ia=function(t){var e=1==t,r=2==t,n=3==t,o=4==t,i=6==t,a=7==t,s=5==t||i;return function(c,u,p,l){for(var f,d,h=ea(c),E=ta(h),g=Zi(u,p),v=ra(E),T=0,y=l||na,m=e?y(c,v):r||a?y(c,0):void 0;v>T;T++)if((s||T in E)&&(d=g(f=E[T],T,h),t))if(e)m[T]=d;else if(d)switch(t){case 3:return!0;case 5:return f;case 6:return T;case 2:oa(m,f)}else switch(t){case 4:return!1;case 7:oa(m,f)}return i?-1:n||o?o:m}},aa={forEach:ia(0),map:ia(1),filter:ia(2),some:ia(3),every:ia(4),find:ia(5),findIndex:ia(6),filterReject:ia(7)},sa=Cr,ca=s,ua=M,pa=y,la=D,fa=_t,da=c,ha=ee,Ea=pt,ga=ir,va=tt,Ta=Ae,ya=Zn,ma=F,Sa=Ko,_a=So,Ra=Ho,Oa=Xo,Aa=ci,Ia=C,ba=tr,Pa=to,wa=j,Na=pi,Ca=fi,Da=qt,La=po,Ua=ae,Ma=Ee,ja=di,xa=_i,Wa=bi,ka=ji,Va=$i,Ga=aa.forEach,Fa=Do("hidden"),Ba="Symbol",Ja="prototype",Ya=Va.set,Ka=Va.getterFor(Ba),Ha=Object[Ja],Qa=ca.Symbol,qa=Qa&&Qa[Ja],Xa=ca.TypeError,za=ca.QObject,$a=Ia.f,Za=ba.f,ts=Oa.f,es=wa.f,rs=pa([].push),ns=Da("symbols"),os=Da("op-symbols"),is=Da("wks"),as=!za||!za[Ja]||!za[Ja].findChild,ss=la&&da((function(){return 7!=Sa(Za({},"a",{get:function(){return Za(this,"a",{value:7}).a}})).a}))?function(t,e,r){var n=$a(Ha,e);n&&delete Ha[e],Za(t,e,r),n&&t!==Ha&&Za(Ha,e,n)}:Za,cs=function(t,e){var r=ns[t]=Sa(qa);return Ya(r,{type:Ba,tag:t,description:e}),la||(r.description=e),r},us=function(t,e,r){t===Ha&&us(os,e,r),ga(t);var n=Ta(e);return ga(r),ha(ns,n)?(r.enumerable?(ha(t,Fa)&&t[Fa][n]&&(t[Fa][n]=!1),r=Sa(r,{enumerable:ma(0,!1)})):(ha(t,Fa)||Za(t,Fa,ma(1,{})),t[Fa][n]=!0),ss(t,n,r)):Za(t,n,r)},ps=function(t,e){ga(t);var r=va(e),n=_a(r).concat(hs(r));return Ga(n,(function(e){la&&!ua(ls,r,e)||us(t,e,r[e])})),t},ls=function(t){var e=Ta(t),r=ua(es,this,e);return!(this===Ha&&ha(ns,e)&&!ha(os,e))&&(!(r||!ha(this,e)||!ha(ns,e)||ha(this,Fa)&&this[Fa][e])||r)},fs=function(t,e){var r=va(t),n=Ta(e);if(r!==Ha||!ha(ns,n)||ha(os,n)){var o=$a(r,n);return!o||!ha(ns,n)||ha(r,Fa)&&r[Fa][n]||(o.enumerable=!0),o}},ds=function(t){var e=ts(va(t)),r=[];return Ga(e,(function(t){ha(ns,t)||ha(La,t)||rs(r,t)})),r},hs=function(t){var e=t===Ha,r=ts(e?os:va(t)),n=[];return Ga(r,(function(t){!ha(ns,t)||e&&!ha(Ha,t)||rs(n,ns[t])})),n};fa||(Qa=function(){if(Ea(qa,this))throw Xa("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?ya(arguments[0]):void 0,e=Ua(t),r=function(t){this===Ha&&ua(r,os,t),ha(this,Fa)&&ha(this[Fa],e)&&(this[Fa][e]=!1),ss(this,e,ma(1,t))};return la&&as&&ss(Ha,e,{configurable:!0,set:r}),cs(e,t)},Na(qa=Qa[Ja],"toString",(function(){return Ka(this).tag})),Na(Qa,"withoutSetter",(function(t){return cs(Ua(t),t)})),wa.f=ls,ba.f=us,Pa.f=ps,Ia.f=fs,Ra.f=Oa.f=ds,Aa.f=hs,ja.f=function(t){return cs(Ma(t),t)},la&&Ca(qa,"description",{configurable:!0,get:function(){return Ka(this).description}})),sa({global:!0,constructor:!0,wrap:!0,forced:!fa,sham:!fa},{Symbol:Qa}),Ga(_a(is),(function(t){xa(t)})),sa({target:Ba,stat:!0,forced:!fa},{useSetter:function(){as=!0},useSimple:function(){as=!1}}),sa({target:"Object",stat:!0,forced:!fa,sham:!la},{create:function(t,e){return void 0===e?Sa(t):ps(Sa(t),e)},defineProperty:us,defineProperties:ps,getOwnPropertyDescriptor:fs}),sa({target:"Object",stat:!0,forced:!fa},{getOwnPropertyNames:ds}),Wa(),ka(Qa,Ba),La[Fa]=!0;var Es=_t&&!!Symbol.for&&!!Symbol.keyFor,gs=Cr,vs=ut,Ts=ee,ys=Zn,ms=qt,Ss=Es,_s=ms("string-to-symbol-registry"),Rs=ms("symbol-to-string-registry");gs({target:"Symbol",stat:!0,forced:!Ss},{for:function(t){var e=ys(t);if(Ts(_s,e))return _s[e];var r=vs("Symbol")(e);return _s[e]=r,Rs[r]=e,r}});var Os=Cr,As=ee,Is=Pt,bs=Nt,Ps=Es,ws=qt("symbol-to-string-registry");Os({target:"Symbol",stat:!0,forced:!Ps},{keyFor:function(t){if(!Is(t))throw TypeError(bs(t)+" is not a symbol");if(As(ws,t))return ws[t]}});var Ns=y([].slice),Cs=kr,Ds=N,Ls=R,Us=Zn,Ms=y([].push),js=Cr,xs=ut,Ws=h,ks=M,Vs=y,Gs=c,Fs=N,Bs=Pt,Js=Ns,Ys=function(t){if(Ds(t))return t;if(Cs(t)){for(var e=t.length,r=[],n=0;n<e;n++){var o=t[n];"string"==typeof o?Ms(r,o):"number"!=typeof o&&"Number"!=Ls(o)&&"String"!=Ls(o)||Ms(r,Us(o))}var i=r.length,a=!0;return function(t,e){if(a)return a=!1,e;if(Cs(this))return e;for(var n=0;n<i;n++)if(r[n]===t)return e}}},Ks=_t,Hs=String,Qs=xs("JSON","stringify"),qs=Vs(/./.exec),Xs=Vs("".charAt),zs=Vs("".charCodeAt),$s=Vs("".replace),Zs=Vs(1..toString),tc=/[\uD800-\uDFFF]/g,ec=/^[\uD800-\uDBFF]$/,rc=/^[\uDC00-\uDFFF]$/,nc=!Ks||Gs((function(){var t=xs("Symbol")();return"[null]"!=Qs([t])||"{}"!=Qs({a:t})||"{}"!=Qs(Object(t))})),oc=Gs((function(){return'"\\udf06\\ud834"'!==Qs("\udf06\ud834")||'"\\udead"'!==Qs("\udead")})),ic=function(t,e){var r=Js(arguments),n=Ys(e);if(Fs(n)||void 0!==t&&!Bs(t))return r[1]=function(t,e){if(Fs(n)&&(e=ks(n,this,Hs(t),e)),!Bs(e))return e},Ws(Qs,null,r)},ac=function(t,e,r){var n=Xs(r,e-1),o=Xs(r,e+1);return qs(ec,t)&&!qs(rc,o)||qs(rc,t)&&!qs(ec,n)?"\\u"+Zs(zs(t,0),16):t};Qs&&js({target:"JSON",stat:!0,arity:3,forced:nc||oc},{stringify:function(t,e,r){var n=Js(arguments),o=Ws(nc?ic:Qs,null,n);return oc&&"string"==typeof o?$s(o,tc,ac):o}});var sc=ci,cc=$t;Cr({target:"Object",stat:!0,forced:!_t||c((function(){sc.f(1)}))},{getOwnPropertySymbols:function(t){var e=sc.f;return e?e(cc(t)):[]}}),_i("asyncIterator"),_i("hasInstance"),_i("isConcatSpreadable"),_i("iterator"),_i("match"),_i("matchAll"),_i("replace"),_i("search"),_i("species"),_i("split");var uc=bi;_i("toPrimitive"),uc();var pc=ut,lc=ji;_i("toStringTag"),lc(pc("Symbol"),"Symbol"),_i("unscopables"),ji(s.JSON,"JSON",!0);var fc,dc,hc,Ec=ot.Symbol,gc={},vc=D,Tc=ee,yc=Function.prototype,mc=vc&&Object.getOwnPropertyDescriptor,Sc=Tc(yc,"name"),_c={EXISTS:Sc,PROPER:Sc&&"something"===function(){}.name,CONFIGURABLE:Sc&&(!vc||vc&&mc(yc,"name").configurable)},Rc=!c((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Oc=ee,Ac=N,Ic=$t,bc=Rc,Pc=Do("IE_PROTO"),wc=Object,Nc=wc.prototype,Cc=bc?wc.getPrototypeOf:function(t){var e=Ic(t);if(Oc(e,Pc))return e[Pc];var r=e.constructor;return Ac(r)&&e instanceof r?r.prototype:e instanceof wc?Nc:null},Dc=c,Lc=N,Uc=nt,Mc=Ko,jc=Cc,xc=pi,Wc=Ee("iterator"),kc=!1;[].keys&&("next"in(hc=[].keys())?(dc=jc(jc(hc)))!==Object.prototype&&(fc=dc):kc=!0);var Vc=!Uc(fc)||Dc((function(){var t={};return fc[Wc].call(t)!==t}));Lc((fc=Vc?{}:Mc(fc))[Wc])||xc(fc,Wc,(function(){return this}));var Gc={IteratorPrototype:fc,BUGGY_SAFARI_ITERATORS:kc},Fc=Gc.IteratorPrototype,Bc=Ko,Jc=F,Yc=ji,Kc=gc,Hc=function(){return this},Qc=y,qc=Ut,Xc=N,zc=String,$c=TypeError,Zc=function(t,e,r){try{return Qc(qc(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(t){}},tu=ir,eu=function(t){if("object"==typeof t||Xc(t))return t;throw $c("Can't set "+zc(t)+" as a prototype")},ru=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=Zc(Object.prototype,"__proto__","set"))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return tu(r),eu(n),e?t(r,n):r.__proto__=n,r}}():void 0),nu=Cr,ou=M,iu=_c,au=function(t,e,r,n){var o=e+" Iterator";return t.prototype=Bc(Fc,{next:Jc(+!n,r)}),Yc(t,o,!1,!0),Kc[o]=Hc,t},su=Cc,cu=ji,uu=pi,pu=gc,lu=Gc,fu=iu.PROPER,du=lu.BUGGY_SAFARI_ITERATORS,hu=Ee("iterator"),Eu="keys",gu="values",vu="entries",Tu=function(){return this},yu=function(t,e,r,n,o,i,a){au(r,e,n);var s,c,u,p=function(t){if(t===o&&E)return E;if(!du&&t in d)return d[t];switch(t){case Eu:case gu:case vu:return function(){return new r(this,t)}}return function(){return new r(this)}},l=e+" Iterator",f=!1,d=t.prototype,h=d[hu]||d["@@iterator"]||o&&d[o],E=!du&&h||p(o),g="Array"==e&&d.entries||h;if(g&&(s=su(g.call(new t)))!==Object.prototype&&s.next&&(cu(s,l,!0,!0),pu[l]=Tu),fu&&o==gu&&h&&h.name!==gu&&(f=!0,E=function(){return ou(h,this)}),o)if(c={values:p(gu),keys:i?E:p(Eu),entries:p(vu)},a)for(u in c)(du||f||!(u in d))&&uu(d,u,c[u]);else nu({target:e,proto:!0,forced:du||f},c);return a&&d[hu]!==E&&uu(d,hu,E,{name:o}),pu[e]=E,c},mu=function(t,e){return{value:t,done:e}},Su=tt,_u=gc,Ru=$i;tr.f;var Ou=yu,Au=mu,Iu="Array Iterator",bu=Ru.set,Pu=Ru.getterFor(Iu);Ou(Array,"Array",(function(t,e){bu(this,{type:Iu,target:Su(t),index:0,kind:e})}),(function(){var t=Pu(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,Au(void 0,!0)):Au("keys"==r?n:"values"==r?e[n]:[n,e[n]],!1)}),"values"),_u.Arguments=_u.Array;var wu={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Nu=s,Cu=cn,Du=yr,Lu=gc,Uu=Ee("toStringTag");for(var Mu in wu){var ju=Nu[Mu],xu=ju&&ju.prototype;xu&&Cu(xu)!==Uu&&Du(xu,Uu,Mu),Lu[Mu]=Lu.Array}var Wu=Ec,ku=Ee,Vu=tr.f,Gu=ku("metadata"),Fu=Function.prototype;void 0===Fu[Gu]&&Vu(Fu,Gu,{value:null}),_i("dispose"),_i("metadata");var Bu=Wu;_i("asyncDispose");var Ju=y,Yu=ut("Symbol"),Ku=Yu.keyFor,Hu=Ju(Yu.prototype.valueOf),Qu=Yu.isRegisteredSymbol||function(t){try{return void 0!==Ku(Hu(t))}catch(t){return!1}};Cr({target:"Symbol",stat:!0},{isRegisteredSymbol:Qu});for(var qu=qt,Xu=ut,zu=y,$u=Pt,Zu=Ee,tp=Xu("Symbol"),ep=tp.isWellKnownSymbol,rp=Xu("Object","getOwnPropertyNames"),np=zu(tp.prototype.valueOf),op=qu("wks"),ip=0,ap=rp(tp),sp=ap.length;ip<sp;ip++)try{var cp=ap[ip];$u(tp[cp])&&Zu(cp)}catch(t){}var up=function(t){if(ep&&ep(t))return!0;try{for(var e=np(t),r=0,n=rp(op),o=n.length;r<o;r++)if(op[n[r]]==e)return!0}catch(t){}return!1};Cr({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:up}),_i("matcher"),_i("observable"),Cr({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:Qu}),Cr({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:up}),_i("metadataKey"),_i("patternMatch"),_i("replaceAll");var pp=o(Bu),lp=y,fp=Br,dp=Zn,hp=z,Ep=lp("".charAt),gp=lp("".charCodeAt),vp=lp("".slice),Tp=function(t){return function(e,r){var n,o,i=dp(hp(e)),a=fp(r),s=i.length;return a<0||a>=s?t?"":void 0:(n=gp(i,a))<55296||n>56319||a+1===s||(o=gp(i,a+1))<56320||o>57343?t?Ep(i,a):n:t?vp(i,a,a+2):o-56320+(n-55296<<10)+65536}},yp={codeAt:Tp(!1),charAt:Tp(!0)}.charAt,mp=Zn,Sp=$i,_p=yu,Rp=mu,Op="String Iterator",Ap=Sp.set,Ip=Sp.getterFor(Op);_p(String,"String",(function(t){Ap(this,{type:Op,string:mp(t),index:0})}),(function(){var t,e=Ip(this),r=e.string,n=e.index;return n>=r.length?Rp(void 0,!0):(t=yp(r,n),e.index+=t.length,Rp(t,!1))}));var bp=o(di.f("iterator"));function Pp(t){return Pp="function"==typeof pp&&"symbol"==typeof bp?function(t){return typeof t}:function(t){return t&&"function"==typeof pp&&t.constructor===pp&&t!==pp.prototype?"symbol":typeof t},Pp(t)}var wp=o(di.f("toPrimitive"));function Np(t){var e=function(t,e){if("object"!==Pp(t)||null===t)return t;var r=t[wp];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Pp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Pp(e)?e:String(e)}function Cp(t,e,r){return(e=Np(e))in t?xr(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Dp=ot,Lp=function(t){return Dp[t+"Prototype"]},Up=Lp("Array").keys,Mp=cn,jp=ee,xp=pt,Wp=Up,kp=Array.prototype,Vp={DOMTokenList:!0,NodeList:!0},Gp=o((function(t){var e=t.keys;return t===kp||xp(kp,t)&&e===kp.keys||jp(Vp,Mp(t))?Wp:e})),Fp=uo.includes;Cr({target:"Array",proto:!0,forced:c((function(){return!Array(1).includes()}))},{includes:function(t){return Fp(this,t,arguments.length>1?arguments[1]:void 0)}});var Bp=Lp("Array").includes,Jp=nt,Yp=R,Kp=Ee("match"),Hp=function(t){var e;return Jp(t)&&(void 0!==(e=t[Kp])?!!e:"RegExp"==Yp(t))},Qp=TypeError,qp=Ee("match"),Xp=Cr,zp=function(t){if(Hp(t))throw Qp("The method doesn't accept regular expressions");return t},$p=z,Zp=Zn,tl=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[qp]=!1,"/./"[t](e)}catch(t){}}return!1},el=y("".indexOf);Xp({target:"String",proto:!0,forced:!tl("includes")},{includes:function(t){return!!~el(Zp($p(this)),Zp(zp(t)),arguments.length>1?arguments[1]:void 0)}});var rl=Lp("String").includes,nl=pt,ol=Bp,il=rl,al=Array.prototype,sl=String.prototype,cl=o((function(t){var e=t.includes;return t===al||nl(al,t)&&e===al.includes?ol:"string"==typeof t||t===sl||nl(sl,t)&&e===sl.includes?il:e})),ul=Nt,pl=TypeError,ll=ri,fl=Math.floor,dl=function(t,e){var r=t.length,n=fl(r/2);return r<8?hl(t,e):El(t,dl(ll(t,0,n),e),dl(ll(t,n),e),e)},hl=function(t,e){for(var r,n,o=t.length,i=1;i<o;){for(n=i,r=t[i];n&&e(t[n-1],r)>0;)t[n]=t[--n];n!==i++&&(t[n]=r)}return t},El=function(t,e,r,n){for(var o=e.length,i=r.length,a=0,s=0;a<o||s<i;)t[a+s]=a<o&&s<i?n(e[a],r[s])<=0?e[a++]:r[s++]:a<o?e[a++]:r[s++];return t},gl=dl,vl=c,Tl=lt.match(/firefox\/(\d+)/i),yl=!!Tl&&+Tl[1],ml=/MSIE|Trident/.test(lt),Sl=lt.match(/AppleWebKit\/(\d+)\./),_l=!!Sl&&+Sl[1],Rl=Cr,Ol=y,Al=Ut,Il=$t,bl=Hr,Pl=function(t,e){if(!delete t[e])throw pl("Cannot delete property "+ul(e)+" of "+ul(t))},wl=Zn,Nl=c,Cl=gl,Dl=function(t,e){var r=[][t];return!!r&&vl((function(){r.call(null,e||function(){return 1},1)}))},Ll=yl,Ul=ml,Ml=Tt,jl=_l,xl=[],Wl=Ol(xl.sort),kl=Ol(xl.push),Vl=Nl((function(){xl.sort(void 0)})),Gl=Nl((function(){xl.sort(null)})),Fl=Dl("sort"),Bl=!Nl((function(){if(Ml)return Ml<70;if(!(Ll&&Ll>3)){if(Ul)return!0;if(jl)return jl<603;var t,e,r,n,o="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)xl.push({k:e+n,v:r})}for(xl.sort((function(t,e){return e.v-t.v})),n=0;n<xl.length;n++)e=xl[n].k.charAt(0),o.charAt(o.length-1)!==e&&(o+=e);return"DGBEFHACIJK"!==o}}));Rl({target:"Array",proto:!0,forced:Vl||!Gl||!Fl||!Bl},{sort:function(t){void 0!==t&&Al(t);var e=Il(this);if(Bl)return void 0===t?Wl(e):Wl(e,t);var r,n,o=[],i=bl(e);for(n=0;n<i;n++)n in e&&kl(o,e[n]);for(Cl(o,function(t){return function(e,r){return void 0===r?-1:void 0===e?1:void 0!==t?+t(e,r)||0:wl(e)>wl(r)?1:-1}}(t)),r=bl(o),n=0;n<r;)e[n]=o[n++];for(;n<i;)Pl(e,n++);return e}});var Jl=Lp("Array").sort,Yl=pt,Kl=Jl,Hl=Array.prototype,Ql=o((function(t){var e=t.sort;return t===Hl||Yl(Hl,t)&&e===Hl.sort?Kl:e})),ql=ut,Xl=Ho,zl=ci,$l=ir,Zl=y([].concat),tf=ql("Reflect","ownKeys")||function(t){var e=Xl.f($l(t)),r=zl.f;return r?Zl(e,r(t)):e},ef=ee,rf=tf,nf=C,of=tr,af=nt,sf=yr,cf=Error,uf=y("".replace),pf=String(cf("zxcasd").stack),lf=/\n\s*at [^:]*:[^\n]*/,ff=lf.test(pf),df=F,hf=!c((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",df(1,7)),7!==t.stack)})),Ef=yr,gf=function(t,e){if(ff&&"string"==typeof t&&!cf.prepareStackTrace)for(;e--;)t=uf(t,lf,"");return t},vf=hf,Tf=Error.captureStackTrace,yf=gc,mf=Ee("iterator"),Sf=Array.prototype,_f=cn,Rf=xt,Of=Q,Af=gc,If=Ee("iterator"),bf=function(t){if(!Of(t))return Rf(t,If)||Rf(t,"@@iterator")||Af[_f(t)]},Pf=M,wf=Ut,Nf=ir,Cf=Nt,Df=bf,Lf=TypeError,Uf=M,Mf=ir,jf=xt,xf=Ze,Wf=M,kf=ir,Vf=Nt,Gf=function(t){return void 0!==t&&(yf.Array===t||Sf[mf]===t)},Ff=Hr,Bf=pt,Jf=function(t,e){var r=arguments.length<2?Df(t):e;if(wf(r))return Nf(Pf(r,t));throw Lf(Cf(t)+" is not iterable")},Yf=bf,Kf=function(t,e,r){var n,o;Mf(t);try{if(!(n=jf(t,"return"))){if("throw"===e)throw r;return r}n=Uf(n,t)}catch(t){o=!0,n=t}if("throw"===e)throw r;if(o)throw n;return Mf(n),r},Hf=TypeError,Qf=function(t,e){this.stopped=t,this.result=e},qf=Qf.prototype,Xf=function(t,e,r){var n,o,i,a,s,c,u,p=r&&r.that,l=!(!r||!r.AS_ENTRIES),f=!(!r||!r.IS_RECORD),d=!(!r||!r.IS_ITERATOR),h=!(!r||!r.INTERRUPTED),E=xf(e,p),g=function(t){return n&&Kf(n,"normal",t),new Qf(!0,t)},v=function(t){return l?(kf(t),h?E(t[0],t[1],g):E(t[0],t[1])):h?E(t,g):E(t)};if(f)n=t.iterator;else if(d)n=t;else{if(!(o=Yf(t)))throw Hf(Vf(t)+" is not iterable");if(Gf(o)){for(i=0,a=Ff(t);a>i;i++)if((s=v(t[i]))&&Bf(qf,s))return s;return new Qf(!1)}n=Jf(t,o)}for(c=f?t.next:n.next;!(u=Wf(c,n)).done;){try{s=v(u.value)}catch(t){Kf(n,"throw",t)}if("object"==typeof s&&s&&Bf(qf,s))return s}return new Qf(!1)},zf=Zn,$f=Cr,Zf=pt,td=Cc,ed=ru,rd=function(t,e,r){for(var n=rf(e),o=of.f,i=nf.f,a=0;a<n.length;a++){var s=n[a];ef(t,s)||r&&ef(r,s)||o(t,s,i(e,s))}},nd=Ko,od=yr,id=F,ad=function(t,e){af(e)&&"cause"in e&&sf(t,"cause",e.cause)},sd=function(t,e,r,n){vf&&(Tf?Tf(t,e):Ef(t,"stack",gf(r,n)))},cd=Xf,ud=function(t,e){return void 0===t?arguments.length<2?"":e:zf(t)},pd=Ee("toStringTag"),ld=Error,fd=[].push,dd=function(t,e){var r,n=Zf(hd,this);ed?r=ed(ld(),n?td(this):hd):(r=n?this:nd(hd),od(r,pd,"Error")),void 0!==e&&od(r,"message",ud(e)),sd(r,dd,r.stack,1),arguments.length>2&&ad(r,arguments[2]);var o=[];return cd(t,fd,{that:o}),od(r,"errors",o),r};ed?ed(dd,ld):rd(dd,ld,{name:!0});var hd=dd.prototype=nd(ld.prototype,{constructor:id(1,dd),message:id(1,""),name:id(1,"AggregateError")});$f({global:!0,constructor:!0,arity:2},{AggregateError:dd});var Ed,gd,vd,Td,yd="undefined"!=typeof process&&"process"==R(process),md=ut,Sd=fi,_d=D,Rd=Ee("species"),Od=pt,Ad=TypeError,Id=In,bd=Nt,Pd=TypeError,wd=ir,Nd=function(t){if(Id(t))return t;throw Pd(bd(t)+" is not a constructor")},Cd=Q,Dd=Ee("species"),Ld=function(t,e){var r,n=wd(t).constructor;return void 0===n||Cd(r=wd(n)[Dd])?e:Nd(r)},Ud=TypeError,Md=/(?:ipad|iphone|ipod).*applewebkit/i.test(lt),jd=s,xd=h,Wd=Ze,kd=N,Vd=ee,Gd=c,Fd=wo,Bd=Ns,Jd=we,Yd=function(t,e){if(t<e)throw Ud("Not enough arguments");return t},Kd=Md,Hd=yd,Qd=jd.setImmediate,qd=jd.clearImmediate,Xd=jd.process,zd=jd.Dispatch,$d=jd.Function,Zd=jd.MessageChannel,th=jd.String,eh=0,rh={},nh="onreadystatechange";Gd((function(){Ed=jd.location}));var oh=function(t){if(Vd(rh,t)){var e=rh[t];delete rh[t],e()}},ih=function(t){return function(){oh(t)}},ah=function(t){oh(t.data)},sh=function(t){jd.postMessage(th(t),Ed.protocol+"//"+Ed.host)};Qd&&qd||(Qd=function(t){Yd(arguments.length,1);var e=kd(t)?t:$d(t),r=Bd(arguments,1);return rh[++eh]=function(){xd(e,void 0,r)},gd(eh),eh},qd=function(t){delete rh[t]},Hd?gd=function(t){Xd.nextTick(ih(t))}:zd&&zd.now?gd=function(t){zd.now(ih(t))}:Zd&&!Kd?(Td=(vd=new Zd).port2,vd.port1.onmessage=ah,gd=Wd(Td.postMessage,Td)):jd.addEventListener&&kd(jd.postMessage)&&!jd.importScripts&&Ed&&"file:"!==Ed.protocol&&!Gd(sh)?(gd=sh,jd.addEventListener("message",ah,!1)):gd=nh in Jd("script")?function(t){Fd.appendChild(Jd("script"))[nh]=function(){Fd.removeChild(this),oh(t)}}:function(t){setTimeout(ih(t),0)});var ch={set:Qd,clear:qd},uh=function(){this.head=null,this.tail=null};uh.prototype={add:function(t){var e={item:t,next:null},r=this.tail;r?r.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}};var ph,lh,fh,dh,hh,Eh=uh,gh=/ipad|iphone|ipod/i.test(lt)&&"undefined"!=typeof Pebble,vh=/web0s(?!.*chrome)/i.test(lt),Th=s,yh=Ze,mh=C.f,Sh=ch.set,_h=Eh,Rh=Md,Oh=gh,Ah=vh,Ih=yd,bh=Th.MutationObserver||Th.WebKitMutationObserver,Ph=Th.document,wh=Th.process,Nh=Th.Promise,Ch=mh(Th,"queueMicrotask"),Dh=Ch&&Ch.value;if(!Dh){var Lh=new _h,Uh=function(){var t,e;for(Ih&&(t=wh.domain)&&t.exit();e=Lh.get();)try{e()}catch(t){throw Lh.head&&ph(),t}t&&t.enter()};Rh||Ih||Ah||!bh||!Ph?!Oh&&Nh&&Nh.resolve?((dh=Nh.resolve(void 0)).constructor=Nh,hh=yh(dh.then,dh),ph=function(){hh(Uh)}):Ih?ph=function(){wh.nextTick(Uh)}:(Sh=yh(Sh,Th),ph=function(){Sh(Uh)}):(lh=!0,fh=Ph.createTextNode(""),new bh(Uh).observe(fh,{characterData:!0}),ph=function(){fh.data=lh=!lh}),Dh=function(t){Lh.head||ph(),Lh.add(t)}}var Mh=Dh,jh=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},xh=s.Promise,Wh="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,kh=!Wh&&!yd&&"object"==typeof window&&"object"==typeof document,Vh=s,Gh=xh,Fh=N,Bh=qe,Jh=fn,Yh=Ee,Kh=kh,Hh=Wh,Qh=Tt,qh=Gh&&Gh.prototype,Xh=Yh("species"),zh=!1,$h=Fh(Vh.PromiseRejectionEvent),Zh=Bh("Promise",(function(){var t=Jh(Gh),e=t!==String(Gh);if(!e&&66===Qh)return!0;if(!qh.catch||!qh.finally)return!0;if(!Qh||Qh<51||!/native code/.test(t)){var r=new Gh((function(t){t(1)})),n=function(t){t((function(){}),(function(){}))};if((r.constructor={})[Xh]=n,!(zh=r.then((function(){}))instanceof n))return!0}return!e&&(Kh||Hh)&&!$h})),tE={CONSTRUCTOR:Zh,REJECTION_EVENT:$h,SUBCLASSING:zh},eE={},rE=Ut,nE=TypeError,oE=function(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw nE("Bad Promise constructor");e=t,r=n})),this.resolve=rE(e),this.reject=rE(r)};eE.f=function(t){return new oE(t)};var iE,aE,sE=Cr,cE=yd,uE=s,pE=M,lE=pi,fE=ji,dE=function(t){var e=md(t);_d&&e&&!e[Rd]&&Sd(e,Rd,{configurable:!0,get:function(){return this}})},hE=Ut,EE=N,gE=nt,vE=function(t,e){if(Od(e,t))return t;throw Ad("Incorrect invocation")},TE=Ld,yE=ch.set,mE=Mh,SE=function(t,e){try{1==arguments.length?console.error(t):console.error(t,e)}catch(t){}},_E=jh,RE=Eh,OE=$i,AE=xh,IE=tE,bE=eE,PE="Promise",wE=IE.CONSTRUCTOR,NE=IE.REJECTION_EVENT,CE=OE.getterFor(PE),DE=OE.set,LE=AE&&AE.prototype,UE=AE,ME=LE,jE=uE.TypeError,xE=uE.document,WE=uE.process,kE=bE.f,VE=kE,GE=!!(xE&&xE.createEvent&&uE.dispatchEvent),FE="unhandledrejection",BE=function(t){var e;return!(!gE(t)||!EE(e=t.then))&&e},JE=function(t,e){var r,n,o,i=e.value,a=1==e.state,s=a?t.ok:t.fail,c=t.resolve,u=t.reject,p=t.domain;try{s?(a||(2===e.rejection&&qE(e),e.rejection=1),!0===s?r=i:(p&&p.enter(),r=s(i),p&&(p.exit(),o=!0)),r===t.promise?u(jE("Promise-chain cycle")):(n=BE(r))?pE(n,r,c,u):c(r)):u(i)}catch(t){p&&!o&&p.exit(),u(t)}},YE=function(t,e){t.notified||(t.notified=!0,mE((function(){for(var r,n=t.reactions;r=n.get();)JE(r,t);t.notified=!1,e&&!t.rejection&&HE(t)})))},KE=function(t,e,r){var n,o;GE?((n=xE.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),uE.dispatchEvent(n)):n={promise:e,reason:r},!NE&&(o=uE["on"+t])?o(n):t===FE&&SE("Unhandled promise rejection",r)},HE=function(t){pE(yE,uE,(function(){var e,r=t.facade,n=t.value;if(QE(t)&&(e=_E((function(){cE?WE.emit("unhandledRejection",n,r):KE(FE,r,n)})),t.rejection=cE||QE(t)?2:1,e.error))throw e.value}))},QE=function(t){return 1!==t.rejection&&!t.parent},qE=function(t){pE(yE,uE,(function(){var e=t.facade;cE?WE.emit("rejectionHandled",e):KE("rejectionhandled",e,t.value)}))},XE=function(t,e,r){return function(n){t(e,n,r)}},zE=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=2,YE(t,!0))},$E=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw jE("Promise can't be resolved itself");var n=BE(e);n?mE((function(){var r={done:!1};try{pE(n,e,XE($E,r,t),XE(zE,r,t))}catch(e){zE(r,e,t)}})):(t.value=e,t.state=1,YE(t,!1))}catch(e){zE({done:!1},e,t)}}};wE&&(ME=(UE=function(t){vE(this,ME),hE(t),pE(iE,this);var e=CE(this);try{t(XE($E,e),XE(zE,e))}catch(t){zE(e,t)}}).prototype,(iE=function(t){DE(this,{type:PE,done:!1,notified:!1,parent:!1,reactions:new RE,rejection:!1,state:0,value:void 0})}).prototype=lE(ME,"then",(function(t,e){var r=CE(this),n=kE(TE(this,UE));return r.parent=!0,n.ok=!EE(t)||t,n.fail=EE(e)&&e,n.domain=cE?WE.domain:void 0,0==r.state?r.reactions.add(n):mE((function(){JE(n,r)})),n.promise})),aE=function(){var t=new iE,e=CE(t);this.promise=t,this.resolve=XE($E,e),this.reject=XE(zE,e)},bE.f=kE=function(t){return t===UE||undefined===t?new aE(t):VE(t)}),sE({global:!0,constructor:!0,wrap:!0,forced:wE},{Promise:UE}),fE(UE,PE,!1,!0),dE(PE);var ZE=Ee("iterator"),tg=!1;try{var eg=0,rg={next:function(){return{done:!!eg++}},return:function(){tg=!0}};rg[ZE]=function(){return this},Array.from(rg,(function(){throw 2}))}catch(t){}var ng=xh,og=function(t,e){if(!e&&!tg)return!1;var r=!1;try{var n={};n[ZE]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch(t){}return r},ig=tE.CONSTRUCTOR||!og((function(t){ng.all(t).then(void 0,(function(){}))})),ag=M,sg=Ut,cg=eE,ug=jh,pg=Xf;Cr({target:"Promise",stat:!0,forced:ig},{all:function(t){var e=this,r=cg.f(e),n=r.resolve,o=r.reject,i=ug((function(){var r=sg(e.resolve),i=[],a=0,s=1;pg(t,(function(t){var c=a++,u=!1;s++,ag(r,e,t).then((function(t){u||(u=!0,i[c]=t,--s||n(i))}),o)})),--s||n(i)}));return i.error&&o(i.value),r.promise}});var lg=Cr,fg=tE.CONSTRUCTOR;xh&&xh.prototype,lg({target:"Promise",proto:!0,forced:fg,real:!0},{catch:function(t){return this.then(void 0,t)}});var dg=M,hg=Ut,Eg=eE,gg=jh,vg=Xf;Cr({target:"Promise",stat:!0,forced:ig},{race:function(t){var e=this,r=Eg.f(e),n=r.reject,o=gg((function(){var o=hg(e.resolve);vg(t,(function(t){dg(o,e,t).then(r.resolve,n)}))}));return o.error&&n(o.value),r.promise}});var Tg=M,yg=eE;Cr({target:"Promise",stat:!0,forced:tE.CONSTRUCTOR},{reject:function(t){var e=yg.f(this);return Tg(e.reject,void 0,t),e.promise}});var mg=ir,Sg=nt,_g=eE,Rg=function(t,e){if(mg(t),Sg(e)&&e.constructor===t)return e;var r=_g.f(t);return(0,r.resolve)(e),r.promise},Og=Cr,Ag=xh,Ig=tE.CONSTRUCTOR,bg=Rg,Pg=ut("Promise"),wg=!Ig;Og({target:"Promise",stat:!0,forced:true},{resolve:function(t){return bg(wg&&this===Pg?Ag:this,t)}});var Ng=M,Cg=Ut,Dg=eE,Lg=jh,Ug=Xf;Cr({target:"Promise",stat:!0,forced:ig},{allSettled:function(t){var e=this,r=Dg.f(e),n=r.resolve,o=r.reject,i=Lg((function(){var r=Cg(e.resolve),o=[],i=0,a=1;Ug(t,(function(t){var s=i++,c=!1;a++,Ng(r,e,t).then((function(t){c||(c=!0,o[s]={status:"fulfilled",value:t},--a||n(o))}),(function(t){c||(c=!0,o[s]={status:"rejected",reason:t},--a||n(o))}))})),--a||n(o)}));return i.error&&o(i.value),r.promise}});var Mg=M,jg=Ut,xg=ut,Wg=eE,kg=jh,Vg=Xf,Gg="No one promise resolved";Cr({target:"Promise",stat:!0,forced:ig},{any:function(t){var e=this,r=xg("AggregateError"),n=Wg.f(e),o=n.resolve,i=n.reject,a=kg((function(){var n=jg(e.resolve),a=[],s=0,c=1,u=!1;Vg(t,(function(t){var p=s++,l=!1;c++,Mg(n,e,t).then((function(t){l||u||(u=!0,o(t))}),(function(t){l||u||(l=!0,a[p]=t,--c||i(new r(a,Gg)))}))})),--c||i(new r(a,Gg))}));return a.error&&i(a.value),n.promise}});var Fg=Cr,Bg=xh,Jg=c,Yg=ut,Kg=N,Hg=Ld,Qg=Rg,qg=Bg&&Bg.prototype;Fg({target:"Promise",proto:!0,real:!0,forced:!!Bg&&Jg((function(){qg.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=Hg(this,Yg("Promise")),r=Kg(t);return this.then(r?function(r){return Qg(e,t()).then((function(){return r}))}:t,r?function(r){return Qg(e,t()).then((function(){throw r}))}:t)}});var Xg=o(ot.Promise);class zg extends e.EventEmitter{reportLogUploadError(t){this.emit("REPORT_LOG_UPLOAD",t)}}const $g=new zg;class Zg{constructor(t){this.logger=void 0,this.prefixLists=[],this.logger=t}debug(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.logger.debug(...this.prefixLists,...e)}info(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.logger.info(...this.prefixLists,...e)}warning(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.logger.warning(...this.prefixLists,...e)}error(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.logger.error(...this.prefixLists,...e)}prefix(t){return this.prefixLists.push(t),this}popPrefix(){return this.prefixLists.pop(),this}}function tv(){const t=new Date;return t.toTimeString().split(" ")[0]+":"+t.getMilliseconds()}function ev(){const t=new Date,e=/((\d+:){2}\d+)/.exec((new Date).toUTCString());return e?(null==e?void 0:e[0])+":"+t.getUTCMilliseconds():t.toTimeString().split(" ")[0]+":"+t.getMilliseconds()}const rv={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},nv=Date.now(),ov=t=>{for(const e in rv)if(Object.prototype.hasOwnProperty.call(rv,e)&&rv[e]===t)return e;return"DEFAULT"};class iv{constructor(){this.proxyServerURL=void 0,this.logLevel=rv.DEBUG,this.uploadState="collecting",this.uploadLogWaitingList=[],this.uploadLogUploadingList=[],this.uploadErrorCount=0,this.currentLogID=0,this.url=void 0,this.extLog=(t,e)=>{this.appendLogToWaitingList(t,...e)}}debug(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];const n=[rv.DEBUG].concat(e);this.log.apply(this,n)}info(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];const n=[rv.INFO].concat(e);this.log.apply(this,n)}warning(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];const n=[rv.WARNING].concat(e);this.log.apply(this,n)}warn(){this.warning(...arguments)}error(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];const n=[rv.ERROR].concat(e);this.log.apply(this,n)}upload(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];const n=[rv.DEBUG].concat(e);this.uploadLog.apply(this,n)}setLogLevel(t){t=Math.min(Math.max(0,t),4),this.logLevel=t}enableLogUpload(){e.setParameter("UPLOAD_LOG",!0)}disableLogUpload(){e.setParameter("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(t){this.proxyServerURL=t}prefix(t){return new Zg(this).prefix(t)}log(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(Date.now()-nv<100)return void setTimeout((()=>{this.log(...r)}),Date.now()-nv);const o=Math.max(0,Math.min(4,r[0]));if(r[0]=tv()+" Agora-SDK [".concat(ov(o),"]:"),this.appendLogToWaitingList(o,...r),o<this.logLevel)return;const i=tv()+" %cAgora-SDK [".concat(ov(o),"]:");let a=[];if(!e.getParameter("USE_NEW_LOG"))switch(o){case rv.DEBUG:a=[i,"color: #64B5F6;"].concat(r.slice(1)),console.log.apply(console,a);break;case rv.INFO:a=[i,"color: #1E88E5; font-weight: bold;"].concat(r.slice(1)),console.log.apply(console,a);break;case rv.WARNING:a=[i,"color: #FB8C00; font-weight: bold;"].concat(r.slice(1)),console.warn.apply(console,a);break;case rv.ERROR:a=[i,"color: #B00020; font-weight: bold;"].concat(r.slice(1)),console.error.apply(console,a)}}uploadLog(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(Date.now()-nv<100)return void setTimeout((()=>{this.uploadLog(...e)}),Date.now()-nv);const n=Math.max(0,Math.min(4,e[0]));e[0]=tv()+" Agora-SDK [".concat(ov(n),"]:"),this.appendLogToWaitingList(n,...e)}appendLogToWaitingList(t){if(!e.getParameter("UPLOAD_LOG"))return;for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];Array.isArray(n[0])?n[0][0]=ev()+" Agora-SDK [".concat(ov(t),"]:"):n[0]=ev()+" Agora-SDK [".concat(ov(t),"]:");let i="";n.forEach((t=>{"object"==typeof t&&(t=JSON.stringify(t)),i+="".concat(t," ")})),this.uploadLogWaitingList.push({payload_str:i,log_level:t,log_item_id:this.currentLogID++}),"uploading"===this.uploadState&&0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}async uploadLogs(){const t=this.uploadLogUploadingList,n={sdk_version:e.VERSION,process_id:e.getParameter("PROCESS_ID"),payload:JSON.stringify(t)};return e.retryable((async()=>{const t=await r.post(this.url||(this.proxyServerURL?"https://".concat(this.proxyServerURL,"/ls/?h=").concat(e.getParameter("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(e.getParameter("LOG_UPLOAD_SERVER"),"/upload/v1")),n,{responseType:"text"});if("OK"!==t.data){const e=new Error("unexpected upload log response");throw e.response=t,e}}),(()=>(this.uploadLogUploadingList=[],!1)),(t=>(t.response?$g.reportLogUploadError({status:t.response.status,data:t.response.data,headers:t.response.headers,message:t.message}):t.request?$g.reportLogUploadError({status:t.request.status,message:t.message}):$g.reportLogUploadError({status:-1,message:t.message}),!0)),{timeout:e.getParameter("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:e.getParameter("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})}uploadLogInterval(){0===this.uploadLogUploadingList.length&&0===this.uploadLogWaitingList.length||(0===this.uploadLogUploadingList.length&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,e.getParameter("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then((()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout((()=>this.uploadLogInterval()),e.getParameter("UPLOAD_LOG_INTERVAL"))})).catch((t=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout((()=>this.uploadLogInterval()),e.getParameter("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout((()=>this.uploadLogInterval()),e.getParameter("UPLOAD_LOG_RETRY_INTERVAL_V1"))})))}}const av=new iv;var sv,cv;t.LOG_UPLOAD_STATE=void 0,(sv=t.LOG_UPLOAD_STATE||(t.LOG_UPLOAD_STATE={})).FREE="free",sv.UPLOADING="uploading",t.LOG_TYPE=void 0,(cv=t.LOG_TYPE||(t.LOG_TYPE={}))[cv.MISC=0]="MISC",cv[cv.INTERNAL_EVENT=1]="INTERNAL_EVENT",cv[cv.PUBLIC_EVENT=2]="PUBLIC_EVENT",cv[cv.WEB_EVENT=3]="WEB_EVENT",cv[cv.INTERNAL_API=4]="INTERNAL_API",cv[cv.WEB_API=5]="WEB_API",cv[cv.PUBLIC_API=6]="PUBLIC_API";const uv={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};var pv,lv,fv;function dv(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function hv(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?dv(Object(r),!0).forEach((function(e){Cp(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dv(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}t.AgoraRTCEvent=void 0,(pv=t.AgoraRTCEvent||(t.AgoraRTCEvent={})).PUBLISH="publish",pv.SUBSCRIBE="subscribe",pv.WS_COMPRESSOR_INIT="ws_compressor_init",pv.SESSION_INIT="session_init",pv.JOIN_CHOOSE_SERVER="join_choose_server",pv.REQ_USER_ACCOUNT="req_user_account",pv.JOIN_GATEWAY="join_gateway",pv.REJOIN_GATEWAY="rejoin_gateway",pv.STREAM_SWITCH="stream_switch",pv.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",pv.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",pv.FIRST_VIDEO_RECEIVED="first_video_received",pv.FIRST_AUDIO_RECEIVED="first_audio_received",pv.FIRST_VIDEO_DECODE="first_video_decode",pv.FIRST_AUDIO_DECODE="first_audio_decode",pv.ON_ADD_AUDIO_STREAM="on_add_audio_stream",pv.ON_ADD_VIDEO_STREAM="on_add_video_stream",pv.ON_UPDATE_STREAM="on_update_stream",pv.ON_REMOVE_STREAM="on_remove_stream",pv.USER_ANALYTICS="req_user_analytics",pv.PC_STATS="pc_stats",t.AgoraRTCEventUploadType=void 0,(lv=t.AgoraRTCEventUploadType||(t.AgoraRTCEventUploadType={})).SESSION="io.agora.pb.Wrtc.Session",lv.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",lv.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",lv.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",lv.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",lv.PUBLISH="io.agora.pb.Wrtc.Publish",lv.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",lv.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",lv.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",lv.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",lv.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",lv.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",lv.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",lv.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",lv.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",lv.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",lv.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",lv.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",lv.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",lv.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",lv.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",lv.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",lv.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",lv.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",lv.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",lv.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",lv.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",lv.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",lv.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",lv.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed",lv.PC_STATS="io.agora.pb.Wrtc.PCStats",t.AgoraEventUploadId=void 0,(fv=t.AgoraEventUploadId||(t.AgoraEventUploadId={}))[fv.WORKER_EVENT=156]="WORKER_EVENT",fv[fv.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",t.EventNameToID=void 0,function(t){t[t.SESSION=26]="SESSION",t[t.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",t[t.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",t[t.JOIN_GATEWAY=28]="JOIN_GATEWAY",t[t.PUBLISH=30]="PUBLISH",t[t.SUBSCRIBE=29]="SUBSCRIBE",t[t.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",t[t.STREAM_SWITCH=32]="STREAM_SWITCH",t[t.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",t[t.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",t[t.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",t[t.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",t[t.API_INVOKE=41]="API_INVOKE",t[t.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",t[t.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",t[t.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",t[t.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",t[t.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",t[t.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",t[t.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",t[t.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",t[t.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",t[t.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",t[t.WORKER_EVENT=156]="WORKER_EVENT",t[t.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",t[t.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",t[t.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",t[t.USER_ANALYTICS=1e4]="USER_ANALYTICS",t[t.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED"}(t.EventNameToID||(t.EventNameToID={}));class Ev{constructor(){this.baseInfoMap=new Map,this.proxyServer=void 0,this.eventUploadTimer=void 0,this.setSessionIdTimer=void 0,this.url=void 0,this.backupUrl=void 0,this._appId=void 0,this.keyEventUploadPendingItems=[],this.normalEventUploadPendingItems=[],this.apiInvokeUploadPendingItems=[],this.apiInvokeCount=0,this.ltsList=[],this.lastSendNormalEventTime=Date.now(),this.customReportCounterTimer=void 0,this.customReportCount=0,this.extApiInvoke=async t=>{for(const r of t){const t=hv(hv({},r),{},{sid:null,invokeId:++this.apiInvokeCount,tag:e.AgoraAPITag.TRACER});this.sendApiInvoke(t)}},this.eventUploadTimer=window.setInterval(this.doSend.bind(this),e.getParameter("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),e.getParameter("EVENT_REPORT_SEND_INTERVAL"))}getBaseInfoBySessionId(t){return this.baseInfoMap.get(t)}adjustSessionStartTime(t){if(!this.baseInfoMap.has(t)&&!this.baseInfoMap.get(t))return void av.error("adjust session ".concat(t," start time, sid is not exist or info is undefined"));const e=this.baseInfoMap.get(t),r=Date.now(),n=e.startTime;e.startTime=r,av.debug("rewrite session ".concat(t," startTime: ").concat(r," , ").concat(r-n,"ms")),this.baseInfoMap.set(t,e)}setAppId(t){this._appId=t}reportApiInvoke(t,r,n){r.timeout=r.timeout||6e4,r.reportResult=void 0===r.reportResult||r.reportResult;const o=Date.now();this.apiInvokeCount+=1;const i=this.apiInvokeCount,a=()=>({tag:r.tag,invokeId:i,sid:t,name:r.name,apiInvokeTime:o,options:r.options,states:r.states||null}),s=!!e.getParameter("SHOW_REPORT_INVOKER_LOG");s&&av.info("".concat(r.name," start"),r.options);let c=!1;e.wait(r.timeout).then((()=>{c||(this.sendApiInvoke(hv(hv({},a()),{},{error:e.AgoraRTCErrorCode.API_INVOKE_TIMEOUT,success:!1})),av.debug("".concat(r.name," timeout")))}));const u=new e.AgoraRTCError(e.AgoraRTCErrorCode.UNEXPECTED_ERROR,"".concat(r.name,": this api invoke is end"));return{onSuccess:t=>{const o=()=>{if(c)throw u;return c=!0,this.sendApiInvoke(hv(hv({},a()),{},{success:!0},r.reportResult&&{result:t})),s&&av.info("".concat(r.name," onSuccess")),t};return n?e.throttleByKey(o,r.name+"Success",n,(()=>c=!0)):o()},onError:t=>{const o=()=>{if(c)throw t;c=!0,this.sendApiInvoke(hv(hv({},a()),{},{success:!1,error:t})),s&&av.info("".concat(r.name," onFailure"),t.toString())};return n?e.throttleByKey(o,r.name+"Error",n,(()=>c=!0)):o()}}}sessionInit(r,n){if(this.baseInfoMap.has(r))return;const o=Date.now(),i=this.createBaseInfo(r,o);i.cname=n.cname;const a=Object.assign({},{willUploadConsoleLog:e.getParameter("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:e.IS_GLOBAL_VERSION?"global":"oversea",areas:e.getParameter("AREAS")&&e.getParameter("AREAS").join(",")},n.extend),s=Date.now(),c=hv(hv({},i),{},{eventType:t.AgoraRTCEvent.SESSION_INIT,appid:n.appid,browser:navigator.userAgent,build:e.BUILD,lts:s,elapse:s-o,extend:JSON.stringify(a),mode:n.mode,process:e.getParameter("PROCESS_ID"),appType:e.getParameter("APP_TYPE"),success:!0,version:e.VERSION});this.send({type:t.AgoraRTCEventUploadType.SESSION,data:c},!0)}joinChooseServer(e,r){const n=this.baseInfoMap.get(e);if(!n)return;const o=n.info,i=Date.now(),a=hv(hv({},o),{},{eventType:t.AgoraRTCEvent.JOIN_CHOOSE_SERVER,lts:i,eventElapse:i-r.lts,chooseServerAddr:r.csAddr,errorCode:r.ec,elapse:i-n.startTime,success:r.succ,chooseServerAddrList:JSON.stringify(r.serverList),uid:r.uid?parseInt(r.uid):null,cid:r.cid?parseInt(r.cid):null,chooseServerIp:r.csIp||"",opid:r.opid,unilbsServerIds:r.unilbsServerIds,extend:r.extend||void 0,isHttp3:r.isHttp3});this.send({type:t.AgoraRTCEventUploadType.JOIN_CHOOSE_SERVER,data:a},!0)}reqUserAccount(e,r){const n=this.baseInfoMap.get(e);if(!n)return;const o=n.info,i=Date.now(),a=hv(hv({},o),{},{eventType:t.AgoraRTCEvent.REQ_USER_ACCOUNT,lts:i,success:r.success,serverAddress:r.serverAddr,stringUid:r.stringUid,uid:r.uid,errorCode:r.errorCode,elapse:i-n.startTime,eventElapse:i-r.lts,extend:JSON.stringify(r.extend)});this.send({type:t.AgoraRTCEventUploadType.REQ_USER_ACCOUNT,data:a},!0)}joinGateway(e,r){const n=this.baseInfoMap.get(e);if(!n)return;const o=n.info;r.vid&&(o.vid=r.vid),o.uid=r.uid,o.cid=r.cid;const i=Date.now(),{firstSuccess:a,avoidJoinStartTime:s,isProxy:c,addr:u}=r,p=i-(a&&s?s:n.startTime),l=hv(hv({},o),{},{eventType:t.AgoraRTCEvent.JOIN_GATEWAY,lts:i,gatewayAddr:r.addr,success:r.succ,errorCode:r.ec,elapse:p,eventElapse:i-r.lts,firstSuccess:a,signalChannel:r.signalChannel}),f=l.success?1:0;if(r.succ&&(n.lastJoinSuccessTime=i),a)this.send({type:t.AgoraRTCEventUploadType.JOIN_GATEWAY,data:l},!0);else{let e;if(u)if(c){const t=u.match(/h=(\d{1,3}-){3}\d{1,3}/g),r=u.match(/p=[0-9]{1,6}/g);e={isSuccess:f,gatewayIp:t&&t.length?t[0].split("=")[1].replace(/-/g,"."):"",port:r&&r.length?r[0].split("=")[1]:"",isProxy:c?1:0}}else{const t=u.match(/wss:\/\/(\d{1,3}-){3}\d{1,3}/g),r=u.match(/(:|p=)[0-9]{1,6}/g);e={isSuccess:f,gatewayIp:t&&t.length?t[0].split("//")[1].replace(/-/g,"."):"",port:r&&r.length?r[0].split(/:|p=/g)[1]:"",isProxy:c?1:0}}else e={isSuccess:f,gatewayIp:"",port:"",isProxy:c?1:0};delete l.success,delete l.eventType,delete l.firstSuccess,l.vid=Number(l.vid);const r=Object.assign({},l,e,{eventType:t.AgoraRTCEvent.REJOIN_GATEWAY});this.send({type:t.AgoraRTCEventUploadType.RE_JOIN_GATEWAY,data:r},!0)}}joinChannelTimeout(e,r){const n=this.baseInfoMap.get(e);if(!n)return;const o=Date.now(),i=hv(hv({},n.info),{},{lts:o,timeout:r,elapse:o-n.startTime});this.send({type:t.AgoraRTCEventUploadType.JOIN_CHANNEL_TIMEOUT,data:i},!0)}publish(e,r){const n=this.baseInfoMap.get(e);if(!n)return;const o=n.info,i=Date.now(),a=hv(hv({},o),{},{eventType:t.AgoraRTCEvent.PUBLISH,lts:i,eventElapse:r.eventElapse,elapse:i-n.startTime,success:r.succ,errorCode:r.ec,videoName:r.videoName,audioName:r.audioName,screenName:r.screenName,screenshare:r.screenshare,audio:r.audio,video:r.video,p2pid:r.p2pid,publishRequestid:r.publishRequestid});this.send({type:t.AgoraRTCEventUploadType.PUBLISH,data:a},!0)}subscribe(e,r,n){const o=this.baseInfoMap.get(e);if(!o)return;const i=o.info,a=Date.now(),s=hv(hv({},i),{},{eventType:t.AgoraRTCEvent.SUBSCRIBE,lts:a,eventElapse:r.eventElapse,elapse:a-o.startTime,success:r.succ,errorCode:r.ec,video:r.video,audio:r.audio,subscribeRequestid:r.subscribeRequestid,p2pid:r.p2pid},n&&{extend:JSON.stringify({isMassSubscribe:!0})});"string"==typeof r.peerid?s.peerSuid=r.peerid:s.peer=r.peerid,this.send({type:t.AgoraRTCEventUploadType.SUBSCRIBE,data:s},!0)}wsCompressorInit(e){var r;const n=[...Gp(r=this.baseInfoMap).call(r)],o=n.length?n[0]:"UnableToGetSid",i=this.baseInfoMap.get(o);if(!i)return;const a=i.info,s=Date.now(),c=hv(hv({},a),{},{eventType:t.AgoraRTCEvent.WS_COMPRESSOR_INIT,lts:s,eventElapse:e.eventElapse,elapse:s-i.startTime,status:e.status?1:2});this.send({type:t.AgoraRTCEventUploadType.WS_COMPRESSOR_INIT,data:c},!0)}firstRemoteVideoDecode(t,e,r,n){const o=this.baseInfoMap.get(t);if(!o)return;const i=o.info,a=Date.now(),s=hv(hv(hv({},i),n),{},{elapse:a-o.startTime,eventType:e,lts:a,firstDecodeFrame:Math.max(a-o.startTime,0),apEnd:Math.max(n.apEnd-o.startTime,0),apStart:Math.max(n.apStart-o.startTime,0),joinGwEnd:Math.max(n.joinGwEnd-o.startTime,0),joinGwStart:Math.max(n.joinGwStart-o.startTime,0),pcEnd:Math.max(n.pcEnd-o.startTime,0),pcStart:Math.max(n.pcStart-o.startTime,0),subscriberEnd:Math.max(n.subscriberEnd-o.startTime,0),subscriberStart:Math.max(n.subscriberStart-o.startTime,0),videoAddNotify:Math.max(n.videoAddNotify-o.startTime,0)});this.send({type:r,data:s},!0)}firstRemoteFrame(t,e,r,n){const o=this.baseInfoMap.get(t);if(!o)return;const i=o.info,a=Date.now(),s=hv(hv(hv({},i),n),{},{elapse:a-o.startTime,eventType:e,lts:a});this.send({type:r,data:s},!0)}pcStats(e,r){const n=this.baseInfoMap.get(e);if(!n)return;const o=n.info,i=Date.now(),a=hv(hv(hv({},o),r),{},{vid:void 0===o.vid?0:Number(o.vid),elapse:i-n.startTime,eventType:t.AgoraRTCEvent.PC_STATS,lts:i});this.send({type:t.AgoraRTCEventUploadType.PC_STATS,data:a},!0)}onGatewayStream(t,e,r,n){const o=this.baseInfoMap.get(t);if(!o)return;const i=o.info,a=Date.now(),s=hv(hv(hv({},i),n),{},{eventType:e,lts:a});this.send({type:r,data:s},!0)}streamSwitch(e,r){const n=this.baseInfoMap.get(e);if(!n)return;const o=n.info,i=Date.now(),a=hv(hv({},o),{},{eventType:t.AgoraRTCEvent.STREAM_SWITCH,lts:i,isDual:r.isdual,elapse:i-n.startTime,success:r.succ});this.send({type:t.AgoraRTCEventUploadType.STREAM_SWITCH,data:a},!0)}requestProxyAppCenter(e,r){const n=this.baseInfoMap.get(e);if(!n)return;const o=n.info,i=Date.now(),a=hv(hv({},o),{},{eventType:t.AgoraRTCEvent.REQUEST_PROXY_APPCENTER,lts:i,eventElapse:i-r.lts,elapse:i-n.startTime,APAddr:r.APAddr,workerManagerList:r.workerManagerList,response:r.response,errorCode:r.ec,success:r.succ});this.send({type:t.AgoraRTCEventUploadType.REQUEST_PROXY_APPCENTER,data:a},!0)}requestProxyWorkerManager(e,r){const n=this.baseInfoMap.get(e);if(!n)return;const o=n.info,i=Date.now(),a=hv(hv({},o),{},{eventType:t.AgoraRTCEvent.REQUEST_PROXY_WORKER_MANAGER,lts:i,eventElapse:i-r.lts,elapse:i-n.startTime,workerManagerAddr:r.workerManagerAddr,response:r.response,errorCode:r.ec,success:r.succ});this.send({type:t.AgoraRTCEventUploadType.REQUEST_PROXY_WORKER_MANAGER,data:a},!0)}setProxyServer(t){this.proxyServer=t,t?av.debug("reportProxyServerurl: ".concat(t)):av.debug("disable reportProxyServerurl: ".concat(t))}peerPublishStatus(e,r){const n=this.baseInfoMap.get(e);if(!n)return;const o=n.info,i=Date.now(),a=hv(hv({},o),{},{subscribeElapse:r.subscribeElapse,peer:r.peer,peerPublishDuration:Math.max(r.audioPublishDuration,r.videoPublishDuration),audiotag:r.audioPublishDuration>0?1:-1,videotag:r.videoPublishDuration>0?1:-1,lts:i,elapse:i-n.startTime,joinChannelSuccessElapse:i-(n.lastJoinSuccessTime||i),peerPublishDurationVideo:r.videoPublishDuration,peerPublishDurationAudio:r.audioPublishDuration});this.send({type:t.AgoraRTCEventUploadType.PEER_PUBLISH_STATUS,data:a},!0)}workerEvent(r,n){const o=this.baseInfoMap.get(r);if(!o)return;const i=o.info,a=Date.now(),s=hv(hv(hv({},i),n),{},{elapse:a-o.startTime,lts:a,productType:"WebRTC"});e.dividePackage(s,"payload",1300).forEach((e=>this.send({type:t.AgoraRTCEventUploadType.WORKER_EVENT,data:e},!0)))}apworkerEvent(e,r){const n=this.baseInfoMap.get(e);if(!n)return;const o=n.info,i=Date.now(),a=hv(hv(hv({},o),r),{},{elapse:i-n.startTime,lts:i});this.send({type:t.AgoraRTCEventUploadType.AP_WORKER_EVENT,data:a},!0)}joinWebProxyAP(e,r){const n=this.baseInfoMap.get(e);if(!n)return;const o=n.info,i=Date.now(),a=hv(hv(hv({},o),r),{},{elapse:i-n.startTime,lts:i,extend:r.extend||void 0});this.send({type:t.AgoraRTCEventUploadType.JOIN_WEB_PROXY_AP,data:a},!0)}WebSocketQuit(e,r){const n=this.baseInfoMap.get(e);if(!n)return;const o=n.info,i=Date.now(),a=hv(hv(hv({},o),r),{},{elapse:i-n.startTime,lts:i});this.send({type:t.AgoraRTCEventUploadType.WEBSOCKET_QUIT,data:a},!0)}async sendCustomReportMessage(r,n){if(this.customReportCount+=n.length,this.customReportCount>e.getParameter("CUSTOM_REPORT_LIMIT"))throw new e.AgoraRTCError(e.AgoraRTCErrorCode.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval((()=>{this.customReportCount=0}),5e3));const o=Date.now(),i=n.map((e=>({type:t.AgoraRTCEventUploadType.USER_ANALYTICS,data:hv(hv({sid:r},e),{},{lts:o})})));try{e.getParameter("NEW_REPORT_SERVER")?await this.postDataToStatsCollector2(i):await this.postDataToStatsCollector(i)}catch(t){throw av.error("send custom report message failed",t.toString()),new e.AgoraRTCError(e.AgoraRTCErrorCode.CUSTOM_REPORT_SEND_FAILED,t.message)}}sendApiInvoke(r){const n=e.getParameter("NOT_REPORT_EVENT");if(r.tag&&cl(n)&&cl(n).call(n,r.tag))return!1;if(null===r.sid)return this.apiInvokeUploadPendingItems.push(r),!1;const o=this.baseInfoMap.get(r.sid);if(!o)return this.apiInvokeUploadPendingItems.push(r),!1;const{cname:i,uid:a,cid:s}=o.info;let c;if(r.lts=r.lts||Date.now(),r.error)if(r.error instanceof e.AgoraRTCError){const{code:t,message:e}=r.error;c=t||(e||r.error.toString())}else c=r.error.toString();const u={invokeId:r.invokeId,sid:r.sid,cname:i,cid:s,uid:a,lts:r.lts,success:r.success,elapse:r.lts-o.startTime,execElapse:r.lts-r.apiInvokeTime,apiName:r.name,options:r.options?JSON.stringify(r.options):void 0,execStates:r.states?JSON.stringify(r.states):void 0,execResult:r.result?JSON.stringify(r.result):void 0,errorCode:r.error?c:void 0,errorMsg:r.error?JSON.stringify(r.error):void 0};return this.send({type:t.AgoraRTCEventUploadType.API_INVOKE,data:u},!1),!0}appendSessionId(){Ev.__CLIENT_LIST__.forEach((t=>{if(t._sessionId){const e=this.apiInvokeUploadPendingItems.length;for(let r=0;r<e;r++){const e=this.apiInvokeUploadPendingItems.shift();e&&(e.sid=t._sessionId,this.sendApiInvoke(Object.assign({},e)))}}}))}send(t,r){if(r)return this.keyEventUploadPendingItems.push(t),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(t),this.normalEventUploadPendingItems.length>e.getParameter("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(t,r){const n=[],o=[];for(;t.length;){const e=t.shift();n.length<20?n.push(e):o.push(e)}t.push(...o);for(const t of[...n]){var i;if(-1!==this.ltsList.indexOf(t.data.lts))t.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(t.data.lts);else this.ltsList.push(t.data.lts),Ql(i=this.ltsList).call(i,((t,e)=>t-e))}r||(this.lastSendNormalEventTime=Date.now());return e.getParameter("ENABLE_EVENT_REPORT")?(n.length&&(e.getParameter("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(n):this.postDataToStatsCollector(n)).catch((t=>n=>{e.getParameter("EVENT_REPORT_RETRY")&&(r?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(t):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(t),this.normalEventUploadPendingItems.length>e.getParameter("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-e.getParameter("NORMAL_EVENT_QUEUE_CAPACITY")),av.warning("report: drop normal events"))))})(n)),t):t}async postDataToStatsCollector2(r){e.networkIndicator.networkState===e.NETWORK_STATE.OFFLINE&&await Xg.race([e.networkIndicator.onlineWaiter,e.wait(2*e.DEFAULT_RETRY_CONFIG.maxRetryTimeout)]);const n=r=>{let n=new Uint8Array;return r.forEach((r=>{const o=e.getMessageEncoding(JSON.stringify(r.data)),i=new ArrayBuffer(5),a=(e=>{let r=0;return Object.entries(t.AgoraRTCEventUploadType).forEach((t=>{let[n,o]=t;o===e.type&&(r=EventNameToID[n])})),r})(r),s=new DataView(i);s.setUint16(0,o.byteLength,!0),s.setUint8(2,255&a),s.setUint8(3,a>>>8&255),s.setUint8(4,a>>>16&255),n=e.appendBuffer(n,new Uint8Array(i)),n=e.appendBuffer(n,o)})),n},o="event";let i=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(e.getParameter("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(o):"https://".concat(e.getParameter("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(o);for(let t=0;t<2;t+=1){1===t&&(i=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(e.getParameter("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(o):"https://".concat(e.getParameter("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(o));try{await e.post(i,{timeout:1e4,data:n(r),headers:hv(hv({biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false"},this._appId&&{appid:this._appId}),{},{"Content-Type":"application/octet-stream"})},!0)}catch(e){if(1===t)throw e;continue}return}}async postDataToStatsCollector(t){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:t.map((t=>JSON.stringify(t))),vid:(t=>{const e=t&&t.data.sid&&this.baseInfoMap.get(t.data.sid);return e&&e.info.vid&&+e.info.vid||0})(t[0])};e.networkIndicator.networkState===e.NETWORK_STATE.OFFLINE&&await Xg.race([e.networkIndicator.onlineWaiter,e.wait(2*e.DEFAULT_RETRY_CONFIG.maxRetryTimeout)]);const o=r?"/events/proto-raws":"/events/messages";let i=this.url||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(e.getParameter("EVENT_REPORT_DOMAIN"),"&p=").concat(e.getParameter("STATS_COLLECTOR_PORT"),"&d=").concat(o):"https://".concat(e.getParameter("EVENT_REPORT_DOMAIN"),":").concat(e.getParameter("STATS_COLLECTOR_PORT")).concat(o));for(let t=0;t<2;t+=1){1===t&&(i=this.backupUrl||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(e.getParameter("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(e.getParameter("STATS_COLLECTOR_PORT"),"&d=").concat(o):"https://".concat(e.getParameter("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(e.getParameter("STATS_COLLECTOR_PORT")).concat(o)));try{r?await e.postProtobuf(i,{timeout:1e4,data:n}):await e.post(i,{timeout:1e4,data:n})}catch(e){if(1===t)throw e;continue}return}}createBaseInfo(t,e){const r=Object.assign({},uv);return r.sid=t,this.baseInfoMap.set(t,{info:r,startTime:e}),r}reportResourceTiming(t,r){const n=performance.getEntriesByName(t),o=n[n.length-1];o&&this.reportApiInvoke(r,{name:"Client.resourceTiming",options:o,tag:e.AgoraAPITag.TRACER}).onSuccess()}}Ev.__CLIENT_LIST__=[];const gv=new Ev;$g.on("REPORT_LOG_UPLOAD",(t=>{t.networkState=e.networkIndicator.networkState,gv.reportApiInvoke(null,{name:"logUploadError",options:t,tag:e.AgoraAPITag.TRACER})})),t.AgoraLogger=iv,t.AgoraRTCEventReport=Ev,t.EVENT_BASE_TEMPLATE=uv,t.apiInvoke=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(r,n,o){const i=o.value;if("function"==typeof i){const a=t.className||r.__className__||("AgoraRTCClient"===r.constructor.name?"Client":r.constructor.name);o.value=function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];let c=o;if(t.argsMap)try{c=t.argsMap(this,...o)}catch(t){av.warning(t),c=[]}try{JSON.stringify(c)}catch(t){av.warning("arguments for method ".concat(a,".").concat(String(n)," not serializable for apiInvoke.")),c=[]}const u=(t.report||gv).reportApiInvoke(this._sessionId||null,{name:"".concat(a,".").concat(String(n)),options:c,tag:e.AgoraAPITag.TRACER,reportResult:t.reportResult},t.throttleTime);try{const e=i.apply(this,o);return e instanceof Xg?e.then((e=>(u.onSuccess(t.reportResult&&e),e))).catch((t=>{throw u.onError(t),t})):(u.onSuccess(t.reportResult&&e),e)}catch(t){throw u.onError(t),t}}}return o}},t.isEventCustomReportParams=function(t){return e.checkValidString(t.reportId,"params.reportId",0,100,!1),e.checkValidString(t.category,"params.category",0,100,!1),e.checkValidString(t.event,"params.event",0,100,!1),e.checkValidString(t.label,"params.label",0,100,!1),e.checkValidNumber(t.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0},t.logReportBus=$g,t.logger=av,t.report=gv}));
